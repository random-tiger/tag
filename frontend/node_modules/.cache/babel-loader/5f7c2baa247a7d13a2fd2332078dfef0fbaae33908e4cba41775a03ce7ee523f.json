{"ast":null,"code":"import React,{useEffect,useState}from'react';import{motion,AnimatePresence}from'framer-motion';import{useParams,Link}from'react-router-dom';import{PlusCircle,Play,Download,Share2,Clock,CheckCircle,AlertCircle,ArrowLeft,Edit3,Trash2,Layers,Sparkles,Upload,MoreHorizontal}from'lucide-react';import toast from'react-hot-toast';import{useStory}from'../contexts/StoryContext';import LoadingSpinner,{VideoGenerationLoader}from'../components/LoadingSpinner';import VideoPlayer from'../components/VideoPlayer';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const StoryViewPage=()=>{var _currentStory$segment,_currentStory$segment2;const{storyId}=useParams();const{currentStory,loading,generationStatus,actions}=useStory();const[newPrompt,setNewPrompt]=useState('');const[showAddSegment,setShowAddSegment]=useState(false);const[isStitching,setIsStitching]=useState(false);useEffect(()=>{if(storyId){actions.loadStory(storyId);}},[storyId]);const handleAddSegment=async()=>{if(!newPrompt.trim()){toast.error('Please enter a prompt for the new segment');return;}try{await actions.generateVideoSegment(storyId,newPrompt,null,true// Use previous frame\n);setNewPrompt('');setShowAddSegment(false);// Reload story to get updated data\nactions.loadStory(storyId);}catch(error){console.error('Error adding segment:',error);}};const handleStitchStory=async()=>{try{setIsStitching(true);await actions.stitchStory(storyId);}catch(error){console.error('Error stitching story:',error);}finally{setIsStitching(false);}};const getSegmentStatusInfo=segment=>{const status=segment.status;switch(status){case'completed':return{icon:CheckCircle,color:'text-green-400',bgColor:'bg-green-400/20'};case'generating':return{icon:Clock,color:'text-cosmic-accent',bgColor:'bg-cosmic-accent/20'};case'failed':return{icon:AlertCircle,color:'text-red-400',bgColor:'bg-red-400/20'};default:return{icon:Clock,color:'text-white/60',bgColor:'bg-white/10'};}};const completedSegments=(currentStory===null||currentStory===void 0?void 0:(_currentStory$segment=currentStory.segments)===null||_currentStory$segment===void 0?void 0:_currentStory$segment.filter(s=>s.status==='completed'))||[];const canStitch=completedSegments.length>0&&!(currentStory!==null&&currentStory!==void 0&&currentStory.final_video_url);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen pt-16 flex items-center justify-center\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"large\",message:\"Loading story...\"})});}if(!currentStory){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen pt-16 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-white mb-4\",children:\"Story Not Found\"}),/*#__PURE__*/_jsx(Link,{to:\"/stories\",className:\"cosmic-button bg-cosmic-accent text-black font-bold py-3 px-6 rounded-pill\",children:\"Back to Stories\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen pt-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/stories\",className:\"text-white/60 hover:text-white transition-colors\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl md:text-4xl font-tubi font-bold text-white\",children:currentStory.title}),currentStory.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-white/70 mt-1\",children:currentStory.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"glass-effect p-3 rounded-xl text-white hover:bg-white/10 transition-colors\",children:/*#__PURE__*/_jsx(Edit3,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"glass-effect p-3 rounded-xl text-white hover:bg-white/10 transition-colors\",children:/*#__PURE__*/_jsx(Share2,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"glass-effect p-3 rounded-xl text-white hover:bg-white/10 transition-colors\",children:/*#__PURE__*/_jsx(MoreHorizontal,{className:\"w-5 h-5\"})})]})]}),currentStory.final_video_url&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"glass-effect rounded-2xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-white flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Play,{className:\"w-6 h-6 text-cosmic-accent\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Final Story\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"glass-effect px-4 py-2 rounded-lg text-white hover:bg-white/10 transition-colors flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Download\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"glass-effect px-4 py-2 rounded-lg text-white hover:bg-white/10 transition-colors flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Share2,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Share\"})]})]})]}),/*#__PURE__*/_jsx(VideoPlayer,{src:currentStory.final_video_url,className:\"w-full aspect-video\",showControls:true})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.1},className:\"glass-effect rounded-xl p-6 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-center justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-white\",children:((_currentStory$segment2=currentStory.segments)===null||_currentStory$segment2===void 0?void 0:_currentStory$segment2.length)||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-white/60 text-sm\",children:\"Segments\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-400\",children:completedSegments.length}),/*#__PURE__*/_jsx(\"div\",{className:\"text-white/60 text-sm\",children:\"Completed\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-cosmic-accent\",children:[completedSegments.length*8,\"s\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-white/60 text-sm\",children:\"Duration\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddSegment(!showAddSegment),className:\"glass-effect text-white font-medium py-2 px-4 rounded-pill hover:bg-white/10 transition-colors flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(PlusCircle,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Scene\"})]}),canStitch&&/*#__PURE__*/_jsx(\"button\",{onClick:handleStitchStory,disabled:isStitching,className:\"cosmic-button bg-cosmic-accent text-black font-bold py-2 px-6 rounded-pill flex items-center space-x-2 disabled:opacity-50\",children:isStitching?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Stitching...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Layers,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Create Final Video\"})]})})]})]})}),/*#__PURE__*/_jsx(AnimatePresence,{children:showAddSegment&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:'auto'},exit:{opacity:0,height:0},className:\"glass-effect rounded-xl p-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold text-white mb-4 flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-5 h-5 text-cosmic-accent\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add New Scene\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:newPrompt,onChange:e=>setNewPrompt(e.target.value),placeholder:\"Describe what happens next in your story. The AI will use the last frame from your previous scene as a starting point...\",className:\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-cosmic-accent transition-colors resize-none\",rows:4,maxLength:1000}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-white/40 text-sm\",children:[newPrompt.length,\"/1000 characters\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddSegment(false),className:\"text-white/60 hover:text-white font-medium py-2 px-4 rounded-pill transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddSegment,disabled:!newPrompt.trim(),className:\"cosmic-button bg-cosmic-accent text-black font-bold py-2 px-6 rounded-pill flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Generate Scene\"})]})]})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-white flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Layers,{className:\"w-6 h-6 text-cosmic-accent\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Story Segments\"})]}),currentStory.segments&&currentStory.segments.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:currentStory.segments.sort((a,b)=>a.sequence_number-b.sequence_number).map((segment,index)=>{const statusInfo=getSegmentStatusInfo(segment);const StatusIcon=statusInfo.icon;const isGenerating=segment.status==='generating';return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:index*0.1},className:\"glass-effect rounded-xl overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"aspect-video bg-gradient-to-br from-cosmic-primary/20 to-cosmic-magenta/20 relative\",children:[segment.video_url?/*#__PURE__*/_jsx(VideoPlayer,{src:segment.video_url,className:\"w-full h-full\",showControls:true}):isGenerating?/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsx(VideoGenerationLoader,{})}):/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(StatusIcon,{className:\"w-12 h-12 mx-auto mb-2 \".concat(statusInfo.color)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white/60 capitalize\",children:segment.status})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-3 left-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-black/50 backdrop-blur-sm px-3 py-1 rounded-pill\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-white font-medium\",children:[\"Scene \",segment.sequence_number]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-3 right-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(statusInfo.bgColor,\" px-2 py-1 rounded-pill flex items-center space-x-1\"),children:[/*#__PURE__*/_jsx(StatusIcon,{className:\"w-3 h-3 \".concat(statusInfo.color)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium \".concat(statusInfo.color,\" capitalize\"),children:segment.status})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white/80 text-sm mb-2 line-clamp-2\",children:segment.enhanced_prompt||segment.original_prompt}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs text-white/50\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Created \",new Date(segment.created_at).toLocaleDateString()]}),segment.completed_at&&/*#__PURE__*/_jsx(\"span\",{children:\"8 seconds\"})]})]})]},segment.id);})}):/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:\"text-center py-20\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-24 rounded-full bg-white/10 flex items-center justify-center mx-auto mb-6\",children:/*#__PURE__*/_jsx(PlusCircle,{className:\"w-12 h-12 text-white/40\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white mb-2\",children:\"No Scenes Yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white/60 mb-8 max-w-md mx-auto\",children:\"Start building your story by adding your first scene\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddSegment(true),className:\"cosmic-button bg-cosmic-accent text-black font-bold py-3 px-6 rounded-pill flex items-center space-x-2 mx-auto\",children:[/*#__PURE__*/_jsx(PlusCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add First Scene\"})]})]})]})]})});};export default StoryViewPage;","map":{"version":3,"names":["React","useEffect","useState","motion","AnimatePresence","useParams","Link","PlusCircle","Play","Download","Share2","Clock","CheckCircle","AlertCircle","ArrowLeft","Edit3","Trash2","Layers","Sparkles","Upload","MoreHorizontal","toast","useStory","LoadingSpinner","VideoGenerationLoader","VideoPlayer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StoryViewPage","_currentStory$segment","_currentStory$segment2","storyId","currentStory","loading","generationStatus","actions","newPrompt","setNewPrompt","showAddSegment","setShowAddSegment","isStitching","setIsStitching","loadStory","handleAddSegment","trim","error","generateVideoSegment","console","handleStitchStory","stitchStory","getSegmentStatusInfo","segment","status","icon","color","bgColor","completedSegments","segments","filter","s","canStitch","length","final_video_url","className","children","size","message","to","div","initial","opacity","y","animate","title","description","src","showControls","transition","delay","onClick","disabled","height","exit","value","onChange","e","target","placeholder","rows","maxLength","sort","a","b","sequence_number","map","index","statusInfo","StatusIcon","isGenerating","video_url","concat","enhanced_prompt","original_prompt","Date","created_at","toLocaleDateString","completed_at","id"],"sources":["/Users/bbassett/simple/frontend/src/pages/StoryViewPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useParams, Link } from 'react-router-dom';\nimport { \n  PlusCircle, Play, Download, Share2, Clock, CheckCircle, \n  AlertCircle, ArrowLeft, Edit3, Trash2, Layers, Sparkles,\n  Upload, MoreHorizontal\n} from 'lucide-react';\nimport toast from 'react-hot-toast';\n\nimport { useStory } from '../contexts/StoryContext';\nimport LoadingSpinner, { VideoGenerationLoader } from '../components/LoadingSpinner';\nimport VideoPlayer from '../components/VideoPlayer';\n\nconst StoryViewPage = () => {\n  const { storyId } = useParams();\n  const { currentStory, loading, generationStatus, actions } = useStory();\n  \n  const [newPrompt, setNewPrompt] = useState('');\n  const [showAddSegment, setShowAddSegment] = useState(false);\n  const [isStitching, setIsStitching] = useState(false);\n  \n  useEffect(() => {\n    if (storyId) {\n      actions.loadStory(storyId);\n    }\n  }, [storyId]);\n  \n  const handleAddSegment = async () => {\n    if (!newPrompt.trim()) {\n      toast.error('Please enter a prompt for the new segment');\n      return;\n    }\n    \n    try {\n      await actions.generateVideoSegment(\n        storyId,\n        newPrompt,\n        null,\n        true // Use previous frame\n      );\n      \n      setNewPrompt('');\n      setShowAddSegment(false);\n      \n      // Reload story to get updated data\n      actions.loadStory(storyId);\n      \n    } catch (error) {\n      console.error('Error adding segment:', error);\n    }\n  };\n  \n  const handleStitchStory = async () => {\n    try {\n      setIsStitching(true);\n      await actions.stitchStory(storyId);\n    } catch (error) {\n      console.error('Error stitching story:', error);\n    } finally {\n      setIsStitching(false);\n    }\n  };\n  \n  const getSegmentStatusInfo = (segment) => {\n    const status = segment.status;\n    switch (status) {\n      case 'completed':\n        return { icon: CheckCircle, color: 'text-green-400', bgColor: 'bg-green-400/20' };\n      case 'generating':\n        return { icon: Clock, color: 'text-cosmic-accent', bgColor: 'bg-cosmic-accent/20' };\n      case 'failed':\n        return { icon: AlertCircle, color: 'text-red-400', bgColor: 'bg-red-400/20' };\n      default:\n        return { icon: Clock, color: 'text-white/60', bgColor: 'bg-white/10' };\n    }\n  };\n  \n  const completedSegments = currentStory?.segments?.filter(s => s.status === 'completed') || [];\n  const canStitch = completedSegments.length > 0 && !currentStory?.final_video_url;\n  \n  if (loading) {\n    return (\n      <div className=\"min-h-screen pt-16 flex items-center justify-center\">\n        <LoadingSpinner size=\"large\" message=\"Loading story...\" />\n      </div>\n    );\n  }\n  \n  if (!currentStory) {\n    return (\n      <div className=\"min-h-screen pt-16 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-white mb-4\">Story Not Found</h1>\n          <Link\n            to=\"/stories\"\n            className=\"cosmic-button bg-cosmic-accent text-black font-bold py-3 px-6 rounded-pill\"\n          >\n            Back to Stories\n          </Link>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"min-h-screen pt-16\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"flex items-center justify-between mb-8\"\n        >\n          <div className=\"flex items-center space-x-4\">\n            <Link\n              to=\"/stories\"\n              className=\"text-white/60 hover:text-white transition-colors\"\n            >\n              <ArrowLeft className=\"w-6 h-6\" />\n            </Link>\n            <div>\n              <h1 className=\"text-3xl md:text-4xl font-tubi font-bold text-white\">\n                {currentStory.title}\n              </h1>\n              {currentStory.description && (\n                <p className=\"text-white/70 mt-1\">{currentStory.description}</p>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-2\">\n            <button className=\"glass-effect p-3 rounded-xl text-white hover:bg-white/10 transition-colors\">\n              <Edit3 className=\"w-5 h-5\" />\n            </button>\n            <button className=\"glass-effect p-3 rounded-xl text-white hover:bg-white/10 transition-colors\">\n              <Share2 className=\"w-5 h-5\" />\n            </button>\n            <button className=\"glass-effect p-3 rounded-xl text-white hover:bg-white/10 transition-colors\">\n              <MoreHorizontal className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </motion.div>\n        \n        {/* Final Video */}\n        {currentStory.final_video_url && (\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"mb-8\"\n          >\n            <div className=\"glass-effect rounded-2xl p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-bold text-white flex items-center space-x-2\">\n                  <Play className=\"w-6 h-6 text-cosmic-accent\" />\n                  <span>Final Story</span>\n                </h2>\n                <div className=\"flex items-center space-x-2\">\n                  <button className=\"glass-effect px-4 py-2 rounded-lg text-white hover:bg-white/10 transition-colors flex items-center space-x-2\">\n                    <Download className=\"w-4 h-4\" />\n                    <span>Download</span>\n                  </button>\n                  <button className=\"glass-effect px-4 py-2 rounded-lg text-white hover:bg-white/10 transition-colors flex items-center space-x-2\">\n                    <Share2 className=\"w-4 h-4\" />\n                    <span>Share</span>\n                  </button>\n                </div>\n              </div>\n              \n              <VideoPlayer\n                src={currentStory.final_video_url}\n                className=\"w-full aspect-video\"\n                showControls={true}\n              />\n            </div>\n          </motion.div>\n        )}\n        \n        {/* Story Controls */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"glass-effect rounded-xl p-6 mb-8\"\n        >\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center space-x-6\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-white\">{currentStory.segments?.length || 0}</div>\n                <div className=\"text-white/60 text-sm\">Segments</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-green-400\">{completedSegments.length}</div>\n                <div className=\"text-white/60 text-sm\">Completed</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-cosmic-accent\">\n                  {(completedSegments.length * 8)}s\n                </div>\n                <div className=\"text-white/60 text-sm\">Duration</div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={() => setShowAddSegment(!showAddSegment)}\n                className=\"glass-effect text-white font-medium py-2 px-4 rounded-pill hover:bg-white/10 transition-colors flex items-center space-x-2\"\n              >\n                <PlusCircle className=\"w-4 h-4\" />\n                <span>Add Scene</span>\n              </button>\n              \n              {canStitch && (\n                <button\n                  onClick={handleStitchStory}\n                  disabled={isStitching}\n                  className=\"cosmic-button bg-cosmic-accent text-black font-bold py-2 px-6 rounded-pill flex items-center space-x-2 disabled:opacity-50\"\n                >\n                  {isStitching ? (\n                    <>\n                      <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\" />\n                      <span>Stitching...</span>\n                    </>\n                  ) : (\n                    <>\n                      <Layers className=\"w-4 h-4\" />\n                      <span>Create Final Video</span>\n                    </>\n                  )}\n                </button>\n              )}\n            </div>\n          </div>\n        </motion.div>\n        \n        {/* Add Segment Form */}\n        <AnimatePresence>\n          {showAddSegment && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"glass-effect rounded-xl p-6 mb-8\"\n            >\n              <h3 className=\"text-lg font-bold text-white mb-4 flex items-center space-x-2\">\n                <Sparkles className=\"w-5 h-5 text-cosmic-accent\" />\n                <span>Add New Scene</span>\n              </h3>\n              \n              <div className=\"space-y-4\">\n                <textarea\n                  value={newPrompt}\n                  onChange={(e) => setNewPrompt(e.target.value)}\n                  placeholder=\"Describe what happens next in your story. The AI will use the last frame from your previous scene as a starting point...\"\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:border-cosmic-accent transition-colors resize-none\"\n                  rows={4}\n                  maxLength={1000}\n                />\n                \n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-white/40 text-sm\">\n                    {newPrompt.length}/1000 characters\n                  </span>\n                  \n                  <div className=\"flex items-center space-x-3\">\n                    <button\n                      onClick={() => setShowAddSegment(false)}\n                      className=\"text-white/60 hover:text-white font-medium py-2 px-4 rounded-pill transition-colors\"\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      onClick={handleAddSegment}\n                      disabled={!newPrompt.trim()}\n                      className=\"cosmic-button bg-cosmic-accent text-black font-bold py-2 px-6 rounded-pill flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      <Sparkles className=\"w-4 h-4\" />\n                      <span>Generate Scene</span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n        \n        {/* Segments List */}\n        <div className=\"space-y-6\">\n          <h2 className=\"text-2xl font-bold text-white flex items-center space-x-2\">\n            <Layers className=\"w-6 h-6 text-cosmic-accent\" />\n            <span>Story Segments</span>\n          </h2>\n          \n          {currentStory.segments && currentStory.segments.length > 0 ? (\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {currentStory.segments\n                .sort((a, b) => a.sequence_number - b.sequence_number)\n                .map((segment, index) => {\n                  const statusInfo = getSegmentStatusInfo(segment);\n                  const StatusIcon = statusInfo.icon;\n                  const isGenerating = segment.status === 'generating';\n                  \n                  return (\n                    <motion.div\n                      key={segment.id}\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: index * 0.1 }}\n                      className=\"glass-effect rounded-xl overflow-hidden\"\n                    >\n                      {/* Video Preview */}\n                      <div className=\"aspect-video bg-gradient-to-br from-cosmic-primary/20 to-cosmic-magenta/20 relative\">\n                        {segment.video_url ? (\n                          <VideoPlayer\n                            src={segment.video_url}\n                            className=\"w-full h-full\"\n                            showControls={true}\n                          />\n                        ) : isGenerating ? (\n                          <div className=\"absolute inset-0 flex items-center justify-center\">\n                            <VideoGenerationLoader />\n                          </div>\n                        ) : (\n                          <div className=\"absolute inset-0 flex items-center justify-center\">\n                            <div className=\"text-center\">\n                              <StatusIcon className={`w-12 h-12 mx-auto mb-2 ${statusInfo.color}`} />\n                              <p className=\"text-white/60 capitalize\">{segment.status}</p>\n                            </div>\n                          </div>\n                        )}\n                        \n                        {/* Segment Number */}\n                        <div className=\"absolute top-3 left-3\">\n                          <div className=\"bg-black/50 backdrop-blur-sm px-3 py-1 rounded-pill\">\n                            <span className=\"text-white font-medium\">\n                              Scene {segment.sequence_number}\n                            </span>\n                          </div>\n                        </div>\n                        \n                        {/* Status Badge */}\n                        <div className=\"absolute top-3 right-3\">\n                          <div className={`${statusInfo.bgColor} px-2 py-1 rounded-pill flex items-center space-x-1`}>\n                            <StatusIcon className={`w-3 h-3 ${statusInfo.color}`} />\n                            <span className={`text-xs font-medium ${statusInfo.color} capitalize`}>\n                              {segment.status}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {/* Segment Info */}\n                      <div className=\"p-4\">\n                        <p className=\"text-white/80 text-sm mb-2 line-clamp-2\">\n                          {segment.enhanced_prompt || segment.original_prompt}\n                        </p>\n                        \n                        <div className=\"flex items-center justify-between text-xs text-white/50\">\n                          <span>\n                            Created {new Date(segment.created_at).toLocaleDateString()}\n                          </span>\n                          {segment.completed_at && (\n                            <span>8 seconds</span>\n                          )}\n                        </div>\n                      </div>\n                    </motion.div>\n                  );\n                })}\n            </div>\n          ) : (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              className=\"text-center py-20\"\n            >\n              <div className=\"w-24 h-24 rounded-full bg-white/10 flex items-center justify-center mx-auto mb-6\">\n                <PlusCircle className=\"w-12 h-12 text-white/40\" />\n              </div>\n              <h3 className=\"text-xl font-bold text-white mb-2\">No Scenes Yet</h3>\n              <p className=\"text-white/60 mb-8 max-w-md mx-auto\">\n                Start building your story by adding your first scene\n              </p>\n              <button\n                onClick={() => setShowAddSegment(true)}\n                className=\"cosmic-button bg-cosmic-accent text-black font-bold py-3 px-6 rounded-pill flex items-center space-x-2 mx-auto\"\n              >\n                <PlusCircle className=\"w-5 h-5\" />\n                <span>Add First Scene</span>\n              </button>\n            </motion.div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default StoryViewPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}